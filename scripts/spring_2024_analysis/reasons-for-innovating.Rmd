---
title: "Reasons for Innovating"
author: "Anwesha Guha"
date: "`r Sys.Date()`"
output: 
  html_document:
    toc: true
    toc_float: true
    theme: flatly
    highlight: tango
    code_folding: hide
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
pacman::p_load(tidyverse, rio, here, DT)

load(here("data/2024 data", "complete_canopy_2024.RData"))

tags_wide <- import(here("data/longitudinal", "full-tags-wide.csv"))
```

## What is the relationship between the reasons school leaders cite for innovating and the future practices they hope to implement?

2024 only
```{r}
# Correlations between catalyst variables and reasons for innovating
catalysts <- full %>% 
  select(starts_with("catalyst_")) %>% 
  select(-starts_with("catalyst_key"), -contains("_other")) 

pilots <- full %>% 
  select(starts_with("pilot_")) %>% 
  select(-contains("_other")) 

```

```{r}
remove_zero_variance <- function(df) {
  # Apply function to each column
  non_constant_cols <- df[, apply(df, 2, sd) != 0]
  return(non_constant_cols)
}

catalysts_clean <- remove_zero_variance(catalysts)
pilots_clean <- remove_zero_variance(pilots) #just one removed

reasons_and_futures <- cor(pilots_clean, catalysts_clean)
rfdf <- data.frame(reasons_and_futures)
```

```{r}
corrplot::corrplot(reasons_and_futures, method = "color", tl.col = "black", tl.cex = 0.3, c1.cex = 0.3, number.cex = 0.2, diag = TRUE)
```

Kind of clunky. I'll just display a table.
```{r}
rfdf %>% 
  round(2) %>% 
  datatable(class = "cell-border stripe")
```


Reflections: tbd. Some interesting stuff, though.

## How have the main reasons for innovating changed since 2021?

Across

Within

## How often have schools that responded in both 2021 and 2024 changed their key catalysts?

Across

Within

## For leaders who were concerned about future sustainability, what reasons did they cite for their concern and did these reasons differ across schools?

2024 only


